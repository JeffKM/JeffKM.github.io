---
layout: post
title:  "Shell Environment&Setting 1"
date:   2019-07-24 16:51:00 +0900
categories: [Language]
---
* TOC
{:toc}

# 환경

쉘은 쉘 세션이 진행되는 동안 모든 정보를 관리하는 **환경**을 유지합니다.
쉘 환경에 저장된 데이터는 설정 프로그램에 의해 사용됩니다. 대부분의 프로그램은 **환경설정 파일**을 사용하지만,
일부 프로그램은 동작하기 위해 환경에 설정된 값을 찾아보기도 합니다. 이러한 사실을 바탕으로 쉘 환경을 사용자에 맞게 설정할
수 있습니다.

### 환경에는 어떤 것들이 저장될까?

비록 bash에서는 구분하기 힘들지만 쉘은 환경에 두 가지 기본적인 형식을 저정합니다. 하나는 **환경 변수**고, 다른 하나는 **쉘 변수**입니다.
쉘 변수는 bash에 의해 저장된 작은 데이터고, 환경 변수는 기본적으로 그 밖의 모든 것입니다. 쉘은 변수뿐만 아니라, **별칭** 그리고 **쉘 함수**와 같은 프로그램 데이터도 저장합니다.

#### 환경 검증하기

환경에 저장된 것이 무엇인지 보려면 bash에 내장된 set 명령어나 printenv 프로그램을 사용하면 됩니다. **set 명령어**는 쉘 변수와 환경 변수 모두 보여주며, **printenv 명령어**는 오직 환경 변수만을 출력합니다.
환경 변수 내용이 길기 때문에 less 명령어를 사용하는 것을 추천합니다.

### 환경은 어떻게 설정할까?

시스템에 로그인하면 bash 프로그램이 시작되면서 **시작 파일**이라고 하는 일련의 환경 설정 스크립트를 읽습니다. 이 시작 파일은 모든 사용자에게 공유되는 기본적인 환경설정 값을 규정합니다.
이어서 개인 사용자의 환경을 정의하는 홈 디렉토리 내의 시작 파일이 구성됩니다. 정확한 순서는 실행된 쉘 세션에 따라 달라지게 됩니다.

#### 로그인 여부에 따른 쉘 환경

로그인 쉘 세션과 비 로그인 쉘 세션, 두 종류의 쉘 세션이 있습니다. **로그인 쉘 세션**에서는 사용자 이름과
비밀번호를 입력하도록 되어 있는데 예를 들면 가상 콘솔 세션이 시작할 때입니다. **비로그인 쉘 세션**은 일반적으로
GUI 환경에서 터미널 세션을 실행할 때 나타납니다.

로그인 쉘 세션용 시작 파일

|파일|내용|
|/etc/profile|모든 사용자에게 적용되는 일반 환경설정.|
|~/.bash_profile|개인 사용자 시작 파일. 일반 환경설정을 확장하거나 무시할 수 있습니다.|
|~/.bash_login|~/.bash_profile 파일이 없으면 bash는 이 스크립트를 읽게 됩니다.|
|~/.profile|~/.bash_profile이나 ~/.bash_login 모두 없으면 bash는 이 파일을 읽습니다.|

비로그인 쉘 세션용 시작 파일

|파일|내용|
|/etc/bash.bashrc|모든 사용자에게 적용되는 일반 환경설정.|
|~/.bash_rc|개인 사용자 시작 파일. 일반 환경설정을 확장하거나 무시할 수 있습니다.|

비로그인 쉘은 이 시작 파일을 읽는 것뿐만 아니라 주로 로그인 쉘 같은 상위 프로세스로부터 환경값을 물려 받습니다.
~/.bashrc 파일은 일반 사용자 관점에서 아마도 가장 중요한 파일일 것입니다. 왜나햐면 항상 참조되는 파일이기 때문입니다.
비로그인 쉘은 기본적으로 이 파일을 읽고, 로그인 쉘용의 시작파일 대부분은 ~/.bashrc 파일을 기본적으로 참조하도록 만들어지기 때문입니다.

#### 시작 파일에는 어떤 것이 있을까?

전형적인 .bash_profile 파일에는 다음과 같은 코드가 있습니다.

```shell
if [ -f ~/.bashrc ]; then
	. ~/.bashrc
fi
```

> If the file "~/.bashrc" exists, then read the "~/.bashrc" file.

위 코드로 어떻게 로그인 쉘이 .bashrc 파일 내용을 가져오는 볼 수 있습니다. 시작 파일에 있는 나머지
내용은 PATH 변수와 함께 수행됩니다. 커맨드라인에 명령어를 입력하면 쉘이 찾아내는 방법은 다음과 같다.
예를 들어, ls 명령어를 입력했을 때, 쉘은 /bin/ls를 찾기 위해서 쉘이 컴퓨터 전체를 검색하는 것이 아니라
PATH 변수에 있는 디렉토리를 대상으로만 검색을 하게 됩니다. PATH 변수는 주로 /etc/profile 시작 파일에서
다음 코드로 설정이 됩니다.
> PATH=$PATH:$HOME/bin

Path는 $HOME/bin 디렉토리를 목록 끝에 추가하도록 설정되어있다. 즉 사용자만의 프로그램을 저장하기 위해서 홈
디렉토리 내에 디렉토리를 생성하고 싶다면, 쉘은 그것을 수용할 준비가 되어있습니다. 우리가 할 일은 그것을 bin이라고
부르는 것입니다. 마지막으로 할 일입니다.
> export PATH

export 명령어는 쉘과 이 쉘의 자식 프로세스들에 PATH 내용을 적용하라고 알려줍니다.

### 환경 편집

이제 시작 파일이 어디에 있는지 또 어떤 내용이 들어있는지 알기 때문에, 우리만의 환경을 설정할 수 있습니다.

#### 어떤 파일을 수정해야 할까?




























