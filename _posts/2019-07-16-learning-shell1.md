---
layout: post
title:  "Learning Shell 1"
date:   2019-07-16 16:00:00 +0900
categories: [Language]
---
* TOC
{:toc}

# 참고서

"**리눅스 커맨드라인 완벽 입문서**"를 읽고 정리하였습니다.

# 쉘이란 무엇인가?

**쉘**이란 키보드로 입력한 명령어를 운영체제에 전달하여 이 명령어를 실행하게 하는 프로그램입니다. GUI 환경에서는 
쉘과 직접 작업할 수 있도록 도와주는 **터미널 (에뮬레이터)**라는 프로그램이 필요합니다.


```shell

[me@linuxbox ~]$

```

이것은 **쉘 프롬프트**라고 부르며 쉘이 입력 가능한 상태일 때에만 나타납니다. 여러번 명령어를 입력한 뒤 위쪽 방향키를 
사용하면 전에 사용햇던 명령어들이 다시 나타납니다. 이러한 기능을 **명령어 히스토리**라고 합니다. 명령어에서 왼/오른쪽
방향키로 명령어 편집이 가능합니다. 터미널 세션 종료는 **exit** 명령어를 사용하면 됩니다.

# 파일시스템 탐색

리눅스와 같이 유닉스형 운영체제에서는 윈도우즈와 마찬가지로 **계층적인 디렉토리 구조**로 파일을 구성합니다. 파일 시스템의
최상위 디렉토리를 **루트(root) 디렉토리**라고 하고, 각 디렉토리에는 파일이나 다른 디렉토리가 포함될 수 있습니다.

| 윈도우즈 | 유닉스형 시스템 |
| 저장장치마다 개별 파일시스템으로 관리 | 아무리 많은 저장장치가 설치되었다 해도 단일 파일시스템으로 관리 |

#### pwd - 현재 작업 디렉토리를 표시하기

우리가 위치해있는 지점을 **현재 작업 디렉토리**라고 합니다. 이를 표시하려면 **pwd(Print Working Directory)**라는
명령어를 사용합니다.
 
```shell

[me@linuxbox ~]$ pwd
/home/me

```

#### ls - 디렉토리 내용 나열하기

현재 작업 디렉토리에 있는 파일과 하위 디렉토리를 표시할 때는 **ls** 명령어를 사용합니다.

```shell

[me@linuxbox ~]$ ls
Desktop Documents Music Pictures Public Templates Videos

```

#### cd - 디렉토리 변경하기

**cd**라는 명령어 뒤에 변경하고자 하는 디렉토리 경로명을 입력하면 현재 작업중인 디렉토리를 변경할 수 있습니다.
**경로명***이란 우리가 원하는 디렉토리까지 파일시스템 트리상의 이동 경로를 나타낸 것입니다. 경로명을 표시하는 방법에는
두 가지가 있는데 절대 경로명과 상대 경로명 입니다.
**절대 경로명**은 루트 디렉토리에서 원하는 디렉토리 또는 파일까지의 경로에 대하여 각 디렉토리 위치들 하나하나를 명시해준 것입니다.

```shell

[me@linuxbox ~]$ cd /usr/bin
[me@linuxbox bin]$ pwd
/usr/bin
[me@linuxbox ~]$ ls
...파일들...

```
**상대 경로명**은 현재 작업 디렉토리가 시작점이 됩니다. 상대 경로명을 표시하려면 파일시스템 트리상의 상대적인 위치를 대신 표현해주는
특수 기호를 사용해야 하는데, 바로 .과 ..입니다. **. 기호**는 현재 작업 디렉토리를 나타내고 **.. 기호**는 작업 디렉토리의 상위 디렉토리를 의미합니다.
./ 기호는 생략 가능합니다.
```shell

[me@linuxbox bin]$ cd ..
[me@linuxbox usr]$ pwd
/usr
[me@linuxbox usr]$ cd ./bin
[me@linuxbox bin]$ pwd
/usr/bin
[me@linuxbox bin]$ cd ..
[me@linuxbox usr]$ cd bin
[me@linuxbox bin]$ pwd
/usr/bin

```

# 시스템 살펴보기

명령어는 주로 하나 이상의 **옵션**과 **명령 인자**들과 함께 사용되는데 보다 구체적으로 실행할 수 있도록 도와줍니다.
> 명령어 -옵션 명령인자

또한 많은 명령어들이 **long 옵션**을 제공하고, -\- 기호를 선행하여 씁니다.


#### ls - 디렉토리 내용 나열하기

| 주로 사용되는 옵션 | long 옵션 | 설명 |
|:--------:|:-------:|:---:|
| -a | -\-all | 경로안의 모든 파일을 나열합니다. `.'으로 시작하는 파일 들도 포함합니다. |
| -d | -\-directory | 경로안의 내용을 나열하지 않고, 그 경로를 보여줍니다.(이것은 쉘 스크립트에서 유용하게 쓰입니다.) |
| -F | -\-classify | 파일 형식을 알리는 문자를 각 파일 뒤에 추가합니다. 일반적으로 실행파일은 "*", 경로는 "/", 심블릭 링크는 "@", FIFO는 "\|", 소켓은 "=", 일반적인 파일은 없습니다. |
| -h | -\-human-readable | -ㅣ 옵션과 함께 사용하여 파일 크기를 사람이 인식하기 쉬운 형태로 표시해줍니다. |
| -l |  | 파일 나열에 있어, 파일 형태, 사용권한, 하드링크 번호, owner 이름, group 이름, 파일 크기, 시간(따로 지정하지 않으면 파일이 만들어진 날자다)을 자세하게 나열합니다. 시간은 여섯달 이전 것이면, 시간이 생략되고, 파일의 연도가 포함됩니다. |
| -r | -\-reverse | 정열 순서를 내림차순으로 합니다. |
| -s |  | 파일 크기 순으로 정렬합니다. |
| -t |  | 파일 수정 시간 순으로 정렬합니다.|

#### file - 파일 타입 확인하기

**file 명령어**를 사용하여 파일 타입을 확인할 수 있습니다.

```shell

[me@linuxbox ~]$ file picture.jpg
Picture.jpg: JPEG image data, JFIF standard 1.01

```

#### less - 파일 내용 표시하기

**less 명령어**는 텍스트 파일을 볼 때 사용하는 프로그램입니다.
텍스트 파일은 환경설정 파일 같이 시스템 환경을 정의하는 파일들과 시스템이 사용하는 실제 프로그램들, 즉 스크립트들도 텍스트 형식으로 저장됩니다.

| 명령키 | 실행 |
|:----:|:---:|
|page up 또는 b|한페이지 위로|
|page down 또는 스페이스 바|한페이지 아래로|
|위쪽 방향키|한 줄 위로|
|아래쪽 방향키|한 줄 아래로|
|G|텍스트 파일 맨 마지막으로 이동|
|1G 또는 g|텍스트 파일 맨 처음으로 이동|
|/문자열|이전 검색어의 다음 찾기|
|n|이전 검색어의 다음 찾기|
|h|도움말 보기|
|q|프로그램 종료|

#### 심볼릭 링크


```shell
1rwxrwxrwx 1 root root 11 2012-08011 07:34 libc.so.6 -> libc-2.6.so
```
디렉토리 정보의 첫 글자가 1인 것과 파일명이 2개인 것은 **심볼릭 링크**라는 특수한 종류의 파일 때문입니다.
심볼릭 링크는 파일의 버전관리에 매우 효과적입니다.

# 파일과 디렉토리 조작

쉘은 굉장히 많은 파일명을 사용하기 때문에 간단하게 파일명의 그룹을 지정할 수 있도록 **와일드 카드**라고 하는 특수문자들을 지원합니다.

|와일드 카드|매칭 문자|
|:------:|:-----:|
| * | 모든 문자 |
| ? | 모든 하나의 문자 |
| [characters] | characters 문자셋에 포함된 문자 |
| [!characters] | characters 문자셋에 포함되지 않은 문자 |
| [[:class:]] | 지정된 문자 클래스에 포함된 문자 |

다음은 가장 흔히 사용되는 문자 클래스들입니다.

| 문자 클래스 | 매칭 문자 |
|:--------:|:-------:|
| [:alnum:] | 모든 알파벳과 숫자 문자 |
| [:alpha:] | 모든 알파벳 문자 |
| [:digit:] | 모든 숫자 |
| [:lower:] | 모든 소문자 |
| [:upper:] | 모든 대문자 |

#### mkdir - 디렉토리 새로 만들기

**mkdir 명령어**는 디렉토리를 생성할 때 사용됩니다.

> mkdir directory ... 

...는 해당인자가 반복될 수 있음을 나타냅니다.

> mkdir dir1 dir2 dir3

#### cp - 파일 및 디렉토리 복사하기

**cp 명령어**로 파일과 디렉토리를 복사합니다. 복사하는
방법은 두가지가 있습니다.

> cp item1 item2

item1이란 파일 또는 디렉토리를 item2라는 파일 또는 디렉토리로 복사하는 방법과

> cp item... directory 

다수의 파일이나 디렉토리를 다른 디렉토리로 복사하는 방법이 있습니다.

| 주로 사용되는 옵션 | 설명 |
|:-------------:|:----:|
| -a -\-archive | 파일 및 디렉토리뿐만 아니라 소유자 및 권한 정보와 같은 속성까지 모두 복사합니다. 반면, 일반적으로는 복사를 하는 사용자의 기본적인 속성을 복사합니다. |
| -i -\-interactive | 기존 파일을 덮어 쓰기 전에 확인 메세지를 보여주는 옵션입니다. ** 이 옵션 없이 cp 명령어를 사용하면 확인 과정 없이 그대로 파일을 덮어쓰게 됩니다.** |
| -r -\-recursive | 디렉토리와 그 안의 내용까지 복사할 때 쓰는 옵션입니다. 이 옵션 또는 -a 옵션은 디렉토리를 복사할 때 필요합니다. |
| -u -\-update | 어떤 디렉토리에 있는 파일을 다른 디렉토리로 복사할 때, 그 디렉토리에는 없거나 최신 버전 파일만을 복사하기 위해서 이 옵션을 사용합니다. |
| -v -\-verbose | 복사가 완료되었다는 메시지를 보여주는 옵션입니다. |

#### mv - 파일 및 디렉토리 이동 그리고 이름 바꾸기

**mv 명령**을 실행하면 두 경우 모두 기존 파일명은 더 이상 존재하지 않게 됩니다.

> mv item1 item2

item1 파일 또는 디렉토리를 item2로 이동하거나 이름을 바꿉니다.

> mv item... directory

하나 이상의 파일이나 디렉토리를 다른 디렉토리로 이동합니다.

| 주로 사용되는 옵션 | 설명 |
|:-------------:|:----:|
| -i -\-interactive | 기존 파일을 덮어 쓰기 전에 확인 메세지를 보여주는 옵션입니다. ** 이 옵션 없이 mv 명령어를 사용하면 확인 과정 없이 그대로 파일을 덮어쓰게 됩니다.** |
| -u -\-update | 파일을 다른 디렉토리로 이동하려고 할 떄, 그 디렉토리에는 없거나 또는 최신 버전의 파일만을 이동하기 위해서 이 옵션을 사용합니다. |
| -v -\-verbose | 이동이 완료되었다는 메시지를 보여주는 옵션입니다. |

#### rm - 파일 및 디렉토리 삭제하기

> rm item...

| 주로 사용되는 옵션 | 설명 |
|:-------------:|:----:|
| -i -\-interactive | 기존 파일을 삭제하기 전에 확인 메세지를 보여주는 옵션입니다. ** 이 옵션 없이 rm 명령어를 사용하면 어떠한 확인 과정 없이 그대로 파일을 삭제하게 됩니다.** |
| -r -\-recursive | 재귀적으로 디렉토리를 삭제합니다. 즉 삭제된 디렉토리에 하위 디렉토리들이 있다해도 모두 삭제된다는 뜻입니다. 디렉토리를 완전히 삭제하려면 이 옵션을 반드시 사용해야 합니다.|
| -f -\-force | 존재하지 않는 파일은 확인 메시지 없이 무시하라는 옵션입니다. 이 옵션은 -I 옵션을 완전히 무시해버립니다. |
| -v -\-verbose | 삭제가 완료되었다는 메시지를 보여주는 옵션입니다. |

#### ln - 하드 링크 또는 심볼릭 링크 만들기

**ln 명령어**는 하드 링크와 심볼릭 링크를 만들 때 사용합니다.

> ln file link

하드 링크를 만들 때 사용하는 것이고,

> ln -s item link

이것은 item 파일 또는 디렉토리에 심볼릭 링크를 생성한 것입니다. 심볼릭 링크는 하드 링크의 파일 시스템 외부 파일 참조 불가능과 디렉토리 참조 불가능 두 가지 단점을
보완하기 위해 탄생된 것입니다. 심볼릭 링크는 파일이나 디렉토리를 가리킬 텍스트 포인터를 가지고 있는 특수한 형태의 파일입니다.

# 명령어와 친해지기

### 명령어란 구체적으로 무엇인가?

명령어는 /usr/bin 디렉토리에서 본 파일들처럼 **실행 프로그램**이거나 ** 쉘에 내장되어 있는 명령어**이거나 **쉘 함수**이거나
우리가 만들어낸 **별칭**입니다.

### 명령어 확인

위 네가지 종류의 명령어 중에 어떠한 종류의 명령어인지를 확인할 수 있습니다.

#### type - 명령어 타입 표시

**type**명령어는 쉘에 내장된 형식으로 명령어 이름을 입력하면 쉘이 실행하게 될 명령어가 어떤 타입인지를 보여줍니다.

> type command

```shell

[me@linuxbox ~]$ type type
type is a shell builtin

```

#### which - 실행 파일의 위치 표시

> which command

```shell

[me@linuxbox ~]$ which ls
/bin/ls

```

which 명령어는 오직 실행 프로그램만을 대상으로 합니다.

### 명령어 도움말 보기

각 명령어마다 가지고 있는 도움말을 검색할 수 있습니다.

#### help - 쉘 빌트인 도움말 보기

bash에는 각 쉘 빌트인마다 내장된 도움말 기능이 있다. 이 도움말을 확인하려면 다음과 같이 help를 쉘 
내장 명령어 이름 앞에 입력하면 됩니다.

#### --help - 사용법 표시

많은 실행 프로그램들이 명령어 문법과 옵션에 대한 설명을 보여주는 --help 옵션을 지원합니다.

#### man - 프로그램 매뉴얼 페이지 표시

커맨드라인용 실행 프로그램 대부분은 매뉴얼 또는 man 페이지라고 불리는 공식적인 프로그램 설명서를 제공하고 있습니다.

> man program

man 명령어가 표시하는 매뉴얼은 각각의 세션으로 나뉘어 있습니다. 사용자 명령어 뿐만 아니라 시스템 관리용 명령어, 프로그래밍 API, 파일 포맷 
등과 같은 다양한 내용을 다룹니다.

man 페이지 구조

| 섹션 | 내용 |
|:---:|:---:|
| 1 | 사용자 명령어 |
| 2 | 커널 시스템 콜 API |
| 3 | C 라이브러리 API |
| 4 | 장치 노드 및 드라이버와 같은 특수 파일 |
| 5 | 파일 포맷 |
| 6 | 스크린세이버와 같은 게임이나 미디어 파일 |
| 7 | 그 외 여러 종류|
| 8 | 시스템 관리용 명령어|

가끔은 원하는 것을 찾기 위해 메뉴얼의 특정 세션에서 찾아볼 필요가 있습니다.

> man section_num search_term

#### apropos - 적합한 명령어 찾기

> apropos keyword

keyword가 쓰이는 명령어 목록을 보여줍니다.

#### whatis - 간략한 명령어 정보 표시

특정 키워드에 부합하는 man 페이지에 대하여 그 이름과 한 줄의 간략한 정보를 보여줍니다. apropos와 거의 동일합니다.

#### info - 프로그램 정보 표시

GNU 프로젝트는 **info 페이지**라는 man 페이지의 대안을 제공합니다. Info 페이지는 웹 페이지처럼 **하이퍼링크**
되어 있습니다.

> info program

info 명령어

| 명령어 | 실행 |
|:---:|:---:|
| ? | 명령어 도움말 보기 |
| PAGE UP 또는 BACKSPACE | 이전 페이지 보기 |
| PAGE DOWN 또는 SPACEBAR | 다음 페이지 보기 |
| n | 다음 - 다음 노드 보기 |
| p | 이전 - 이전 노드 보기 |
| u | 위로 - 현재 표시된 노드의 상위 노드(주로 메뉴) 보기 |
| ENTER | 현재 커서 위치에 있는 하이퍼링크로 이동하기 |
| q | 종료하기 |















